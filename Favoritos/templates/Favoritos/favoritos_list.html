{% extends "Home/base.html" %}
{% block title %} Inicio {% endblock %}
{% load static %}
{% block content %}
<style>
  #alert{
    display: none;
  }
</style>
<div class="row">
  <div id="alert" class="col-xs-12 fixed-top alert alert-success alert-dismissible fade show" role="alert">
    <strong>se elimino {{request.GET.name}}</strong>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
    
  </div>
  <div class="row">
  <div class="col-xs-12">
    <h1>favoritos</h1>
  </div>
  {% if favoritos %}
  <table class="table">
    <tr>
      <th>Nombre</th>
      <th></th>
      <th>Valor</th>
    </tr>
    
    {% for item in favoritos %}

      <tr>
        
        <td><a href="/ListadoProductos/{{item.id_producto}}">{{item.name}}</a></td>
        <td></td>
        <td>
          <a href='' id="{{item.id_producto}}" onclick="remove(this)" >
            <!--<a href='/Favoritos/delete-favoritos/{{item.id}}/' class="remove" id="{{item.id_producto}}">-->
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
              <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8
              8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
              {{item.id_producto}}
            </svg>
          </a>
      </td>
      </tr>
    {% endfor %}
    {% else %}
    <p class="col-xs-12 m-5">No hay favoritos</p>
    {%endif%}
  </table>
</div>
</div>
<script>
function remove(e){
  id = e.id;
         $.ajax({
             url: '/Favoritos/delete-favoritos/',
             data: {
                 'id': id,  
             },
             dataType: 'json',
             success: function (data) {
  //Aviso cuando se actualizo el registro
              $('#alert').fadeIn(); 
              console.log(data)            
             }
         });
        }
      
</script>
{% endblock %}